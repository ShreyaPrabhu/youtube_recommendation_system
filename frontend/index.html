<!DOCTYPE html>
  <html>
    <head>
      <!-- Compiled and minified CSS -->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

      <!-- Compiled and minified JavaScript -->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      <!--Import materialize.css-->
      <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <nav>
    <div class="nav-wrapper">
      <div class="row">
        <div class="col s3"> </div>
      <a href="#" class="brand-logo">Youtube Learning Recommendations</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="https://github.com/ShreyaPrabhu">Source Code</a></li>
      </ul>
      </div>
      </div>
  </nav>

  <nav>
    <div class="nav-wrapper">
      <form>
        <div class="input-field">
          <input id="search" type="search" required onkeyup="callSearch(document.getElementById('search').value)">
          <label class="label-icon" for="search"><i class="material-icons">search</i></label>
          <i class="material-icons">close</i>
        </div>
      </form>
    </div>
  </nav>
    <body>

      <div class="response" id="response">
      </div>

      <script>

        function tableCreate(items) {
            var body = document.getElementsByClassName('response')[0];
            var tbl = document.createElement('table');
            tbl.style.width = '100%';
            tbl.setAttribute('border', '1');
            var tbdy = document.createElement('tbody');
            for (var i = 0; i < items.length; i++) {
              var tr = document.createElement('tr');
              var td = document.createElement('td');
              td.colSpan = "3"
              var img = document.createElement('img');
              img.src = items[i].snippet.thumbnails.default.url
              img.className = "square"
              td.appendChild(img)
              tr.appendChild(td)
              var td = document.createElement('td');
              td.colSpan = "3"
              var title = document.createTextNode(items[i].snippet.title)
              td.appendChild(title)
              tr.appendChild(td)
              var td = document.createElement('td');
              td.colSpan = "3"
              var channelTitle = document.createTextNode(items[i].snippet.channelTitle)
              td.appendChild(channelTitle)
              tr.appendChild(td)
              var td = document.createElement('td');
              td.colSpan = "3"
              var description = document.createTextNode(items[i].snippet.description)
              td.appendChild(description)
              tr.appendChild(td)
              tbdy.appendChild(tr);
            }
            tbl.appendChild(tbdy);
            body.appendChild(tbl)
        }
        tableCreate();

        function callSearch(value) {
          var xhttp = new XMLHttpRequest();
          xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                json = JSON.parse(this.responseText);
                var items = json.items;
                tableCreate(items)
            }
          };
          xhttp.open("GET", "http://127.0.0.1:5000/search?search_query=" + value, true);
          xhttp.setRequestHeader('Content-Type', 'application/json');
          xhttp.setRequestHeader('Access-Control-Allow-Headers', 'Content-Type');
          xhttp.send();
        }
    </script>
    </body>
  </html>
